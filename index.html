<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>g1 Brookasil | Portal de Notícias</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        /* ==========================================================================
           1. RESET E CONFIGURAÇÕES GERAIS
           ========================================================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        :root {
            --azul-principal: #0066cc;
            --azul-escuro: #004c99;
            --verde-brookasil: #00a859;
            --verde-escuro: #008744;
            --branco: #ffffff;
            --cinza-claro: #f5f5f5;
            --cinza-medio: #e0e0e0;
            --cinza-escuro: #666666;
            --preto-suave: #333333;
            --sombra: rgba(0, 0, 0, 0.08);
            --sombra-forte: rgba(0, 0, 0, 0.12);
            --transicao: all 0.3s ease;
        }
        
        body {
            background-color: var(--branco);
            color: var(--preto-suave);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        a {
            text-decoration: none;
            color: inherit;
            transition: var(--transicao);
        }
        
        ul {
            list-style: none;
        }
        
        button, input, textarea {
            font-family: 'Inter', sans-serif;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* ==========================================================================
           2. HEADER (ESTILO g1)
           ========================================================================== */
        .header {
            background: linear-gradient(to right, var(--azul-principal), var(--azul-escuro));
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px var(--sombra-forte);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 2rem;
            font-weight: 800;
        }
        
        .logo-g1 {
            background-color: var(--verde-brookasil);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        .logo-text {
            font-weight: 800;
            font-size: 1.8rem;
        }
        
        .logo-brookasil {
            color: var(--verde-brookasil);
            font-weight: 800;
        }
        
        .info-bar {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
            width: 100%;
            justify-content: space-between;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 10px;
        }
        
        .search-container {
            flex-grow: 1;
            max-width: 500px;
        }
        
        .search-bar {
            display: flex;
            background: white;
            border-radius: 24px;
            overflow: hidden;
        }
        
        .search-bar input {
            flex-grow: 1;
            padding: 10px 20px;
            border: none;
            outline: none;
            font-size: 0.95rem;
        }
        
        .search-bar button {
            background: var(--verde-brookasil);
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .search-bar button:hover {
            background: var(--verde-escuro);
        }
        
        .live-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.9rem;
        }
        
        .weather, .time {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 12px;
            border-radius: 20px;
        }
        
        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* ==========================================================================
           3. NAVEGAÇÃO PRINCIPAL (MEGA MENU)
           ========================================================================== */
        .main-nav {
            background-color: var(--branco);
            border-bottom: 1px solid var(--cinza-medio);
            box-shadow: 0 2px 5px var(--sombra);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0;
        }
        
        .nav-menu {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
        
        .nav-item {
            padding: 18px 20px;
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--preto-suave);
            position: relative;
            cursor: pointer;
        }
        
        .nav-item:hover, .nav-item.active {
            color: var(--azul-principal);
        }
        
        .nav-item:hover::after, .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--azul-principal);
        }
        
        .user-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .login-btn {
            background-color: transparent;
            color: var(--azul-principal);
            border: 1px solid var(--azul-principal);
        }
        
        .login-btn:hover {
            background-color: var(--azul-principal);
            color: white;
        }
        
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--cinza-medio);
            cursor: pointer;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 20px var(--sombra-forte);
            min-width: 200px;
            z-index: 100;
            display: none;
            margin-top: 10px;
        }
        
        .dropdown-menu.show {
            display: block;
        }
        
        .dropdown-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transicao);
            border-bottom: 1px solid var(--cinza-claro);
        }
        
        .dropdown-item:hover {
            background-color: var(--cinza-claro);
            color: var(--azul-principal);
        }
        
        /* ==========================================================================
           4. CONTEÚDO PRINCIPAL E LAYOUT
           ========================================================================== */
        .main-content {
            flex: 1;
            padding: 30px 0;
            background-color: var(--cinza-claro);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--preto-suave);
            position: relative;
            padding-bottom: 8px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--verde-brookasil);
        }
        
        .see-more {
            color: var(--azul-principal);
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .see-more:hover {
            text-decoration: underline;
        }
        
        /* ==========================================================================
           5. HOME - LAYOUT IMPACTANTE
           ========================================================================== */
        .featured-section {
            margin-bottom: 40px;
        }
        
        .main-feature {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .main-news {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--sombra-forte);
            height: 400px;
        }
        
        .main-news img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .main-news:hover img {
            transform: scale(1.03);
        }
        
        .main-news-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 30px;
            color: white;
        }
        
        .main-news-category {
            display: inline-block;
            background-color: var(--verde-brookasil);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .main-news-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .main-news-author {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .secondary-news {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .secondary-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px var(--sombra);
            transition: var(--transicao);
        }
        
        .secondary-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px var(--sombra-forte);
        }
        
        .secondary-img {
            width: 120px;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            flex-shrink: 0;
        }
        
        .secondary-content {
            flex: 1;
        }
        
        .secondary-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        
        /* ==========================================================================
           6. CARDS DE NOTÍCIA (PADRÃO PREMIUM)
           ========================================================================== */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .news-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px var(--sombra);
            transition: var(--transicao);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .news-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px var(--sombra-forte);
        }
        
        .news-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        .news-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .news-category {
            display: inline-block;
            background-color: var(--azul-principal);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .news-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 10px;
            line-height: 1.3;
            flex: 1;
        }
        
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            font-size: 0.85rem;
            color: var(--cinza-escuro);
        }
        
        .news-author {
            font-weight: 600;
            color: var(--azul-principal);
        }
        
        /* ==========================================================================
           7. PÁGINA DE NOTÍCIA COMPLETA
           ========================================================================== */
        .news-detail {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 3px 15px var(--sombra);
            margin-bottom: 40px;
        }
        
        .news-detail-header {
            margin-bottom: 30px;
        }
        
        .detail-category {
            display: inline-block;
            background-color: var(--azul-principal);
            color: white;
            padding: 6px 15px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .detail-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            line-height: 1.2;
        }
        
        .detail-subtitle {
            font-size: 1.2rem;
            color: var(--cinza-escuro);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .detail-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--cinza-medio);
            margin-bottom: 20px;
        }
        
        .detail-author-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .detail-author-info {
            flex: 1;
        }
        
        .detail-author-name {
            font-weight: 700;
            margin-bottom: 3px;
        }
        
        .detail-date {
            color: var(--cinza-escuro);
            font-size: 0.9rem;
        }
        
        .detail-image {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .detail-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 40px;
        }
        
        .detail-content p {
            margin-bottom: 20px;
        }
        
        .quote {
            border-left: 4px solid var(--verde-brookasil);
            padding-left: 20px;
            font-style: italic;
            margin: 25px 0;
            font-size: 1.2rem;
            color: var(--cinza-escuro);
        }
        
        /* ==========================================================================
           8. INTERAÇÕES SOCIAIS
           ========================================================================== */
        .news-interactions {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px 0;
            border-top: 1px solid var(--cinza-medio);
            border-bottom: 1px solid var(--cinza-medio);
            margin-bottom: 30px;
        }
        
        .interaction-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            background-color: var(--cinza-claro);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao);
            border: none;
            font-size: 0.95rem;
        }
        
        .interaction-btn:hover {
            background-color: var(--cinza-medio);
        }
        
        .like-btn.active {
            background-color: rgba(0, 102, 204, 0.1);
            color: var(--azul-principal);
        }
        
        .dislike-btn.active {
            background-color: rgba(255, 0, 0, 0.1);
            color: #ff0000;
        }
        
        .repost-btn.active {
            background-color: rgba(0, 168, 89, 0.1);
            color: var(--verde-brookasil);
        }
        
        /* ==========================================================================
           9. COMENTÁRIOS (ESTILO REDE SOCIAL)
           ========================================================================== */
        .comments-section {
            margin-bottom: 40px;
        }
        
        .comment-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px var(--sombra);
            margin-bottom: 30px;
        }
        
        .comment-input {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--cinza-medio);
            border-radius: 8px;
            resize: vertical;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .comment-input:focus {
            outline: none;
            border-color: var(--azul-principal);
        }
        
        .comment-submit {
            background-color: var(--azul-principal);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .comment-submit:hover {
            background-color: var(--azul-escuro);
        }
        
        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .comment {
            display: flex;
            gap: 15px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px var(--sombra);
        }
        
        .comment-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .comment-user {
            font-weight: 700;
            margin-bottom: 3px;
        }
        
        .comment-username {
            color: var(--cinza-escuro);
            font-size: 0.9rem;
        }
        
        .comment-date {
            color: var(--cinza-escuro);
            font-size: 0.85rem;
        }
        
        .comment-text {
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
        }
        
        .comment-action {
            color: var(--cinza-escuro);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .comment-action:hover {
            color: var(--azul-principal);
        }
        
        .comment-replies {
            margin-left: 30px;
            margin-top: 15px;
            padding-left: 20px;
            border-left: 2px solid var(--cinza-claro);
        }
        
        /* ==========================================================================
           10. PAINÉIS ADMINISTRATIVOS
           ========================================================================== */
        .admin-panel {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 3px 15px var(--sombra);
            margin-bottom: 40px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--cinza-claro);
        }
        
        .admin-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--preto-suave);
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--cinza-medio);
            margin-bottom: 30px;
        }
        
        .admin-tab {
            padding: 12px 25px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transicao);
        }
        
        .admin-tab.active {
            color: var(--azul-principal);
            border-bottom-color: var(--azul-principal);
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--azul-principal);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--cinza-escuro);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .admin-table th {
            background-color: var(--cinza-claro);
            padding: 15px;
            text-align: left;
            font-weight: 700;
            border-bottom: 2px solid var(--cinza-medio);
        }
        
        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid var(--cinza-claro);
        }
        
        .table-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: var(--transicao);
        }
        
        .edit-btn {
            background-color: rgba(0, 102, 204, 0.1);
            color: var(--azul-principal);
        }
        
        .edit-btn:hover {
            background-color: rgba(0, 102, 204, 0.2);
        }
        
        .delete-btn {
            background-color: rgba(255, 0, 0, 0.1);
            color: #ff0000;
        }
        
        .delete-btn:hover {
            background-color: rgba(255, 0, 0, 0.2);
        }
        
        .promote-btn {
            background-color: rgba(0, 168, 89, 0.1);
            color: var(--verde-brookasil);
        }
        
        .promote-btn:hover {
            background-color: rgba(0, 168, 89, 0.2);
        }
        
        .ban-btn {
            background-color: rgba(255, 165, 0, 0.1);
            color: #ffa500;
        }
        
        .ban-btn:hover {
            background-color: rgba(255, 165, 0, 0.2);
        }
        
        /* ==========================================================================
           11. FORMULÁRIOS E MODAIS
           ========================================================================== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal {
            background: white;
            border-radius: 10px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--cinza-medio);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--cinza-escuro);
            transition: var(--transicao);
        }
        
        .modal-close:hover {
            color: var(--preto-suave);
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--azul-principal);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            font-size: 1rem;
            background: white;
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
        }
        
        .form-textarea:focus {
            outline: none;
            border-color: var(--azul-principal);
        }
        
        .form-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
        }
        
        .btn-primary {
            background-color: var(--azul-principal);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .btn-primary:hover {
            background-color: var(--azul-escuro);
        }
        
        .btn-secondary {
            background-color: var(--cinza-claro);
            color: var(--preto-suave);
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao);
        }
        
        .btn-secondary:hover {
            background-color: var(--cinza-medio);
        }
        
        /* ==========================================================================
           12. PERFIL DO USUÁRIO
           ========================================================================== */
        .profile-header {
            background: linear-gradient(to right, var(--azul-principal), var(--azul-escuro));
            padding: 40px 0;
            margin-bottom: 30px;
            color: white;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid white;
        }
        
        .profile-details {
            flex: 1;
        }
        
        .profile-name {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .profile-username {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        .profile-bio {
            font-size: 1rem;
            line-height: 1.5;
            max-width: 600px;
        }
        
        .profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--cinza-medio);
            margin-bottom: 30px;
        }
        
        .profile-tab {
            padding: 12px 25px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transicao);
        }
        
        .profile-tab.active {
            color: var(--azul-principal);
            border-bottom-color: var(--azul-principal);
        }
        
        /* ==========================================================================
           13. PÁGINAS INFORMATIVAS
           ========================================================================== */
        .info-page {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 3px 15px var(--sombra);
            margin-bottom: 40px;
        }
        
        .info-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--preto-suave);
        }
        
        .info-content {
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        .info-content h3 {
            margin: 25px 0 15px;
            color: var(--azul-principal);
        }
        
        .info-content p {
            margin-bottom: 15px;
        }
        
        .info-content ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 20px;
        }
        
        .info-content li {
            margin-bottom: 10px;
        }
        
        .external-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: var(--verde-brookasil);
            color: white;
            padding: 12px 25px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 20px;
            transition: var(--transicao);
        }
        
        .external-link:hover {
            background-color: var(--verde-escuro);
            transform: translateY(-3px);
        }
        
        /* ==========================================================================
           14. FOOTER
           ========================================================================== */
        .footer {
            background-color: var(--preto-suave);
            color: white;
            padding: 40px 0;
            margin-top: auto;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .footer-link {
            color: #cccccc;
            transition: var(--transicao);
        }
        
        .footer-link:hover {
            color: white;
            text-decoration: underline;
        }
        
        .footer-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaaaaa;
            font-size: 0.9rem;
        }
        
        /* ==========================================================================
           15. RESPONSIVIDADE
           ========================================================================== */
        @media (max-width: 992px) {
            .main-feature {
                grid-template-columns: 1fr;
            }
            
            .main-news {
                height: 350px;
            }
            
            .info-bar {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .mobile-toggle {
                display: block;
                position: absolute;
                right: 20px;
                top: 20px;
            }
            
            .nav-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-menu {
                flex-direction: column;
                width: 100%;
                display: none;
            }
            
            .nav-menu.show {
                display: flex;
            }
            
            .nav-item {
                width: 100%;
                padding: 15px 0;
                border-bottom: 1px solid var(--cinza-claro);
            }
            
            .user-actions {
                width: 100%;
                justify-content: center;
                margin-top: 15px;
            }
            
            .main-news-title {
                font-size: 1.5rem;
            }
            
            .detail-title {
                font-size: 1.8rem;
            }
            
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .profile-info {
                flex-direction: column;
                text-align: center;
            }
        }
        
        @media (max-width: 576px) {
            .news-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .news-interactions {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .main-news {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container header-container">
            <div class="logo">
                <div class="logo-g1">g1</div>
                <div class="logo-text">Brook<span class="logo-brookasil">asil</span></div>
            </div>
            
            <button class="mobile-toggle" id="mobileToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="info-bar">
                <div class="search-container">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Buscar notícias, autores, categorias...">
                        <button id="searchBtn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div class="live-info">
                    <div class="weather">
                        <i class="fas fa-sun"></i>
                        <span id="weatherInfo">Carregando clima...</span>
                    </div>
                    <div class="time">
                        <i class="fas fa-clock"></i>
                        <span id="currentTime">Carregando horário...</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- NAVEGAÇÃO PRINCIPAL -->
    <nav class="main-nav">
        <div class="container nav-container">
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item active" data-page="home">Home</li>
                <li class="nav-item" data-page="news">Política</li>
                <li class="nav-item" data-page="news">Polícia</li>
                <li class="nav-item" data-page="news">Educação</li>
                <li class="nav-item" data-page="news">Esporte</li>
                <li class="nav-item" data-page="news">Entretenimento</li>
                <li class="nav-item" data-page="news">Curiosidades</li>
                <li class="nav-item" data-page="filiação">Filiação Partidária</li>
                <li class="nav-item" data-page="candidatura">Candidatura</li>
                <li class="nav-item" data-page="divulgação">Divulgação de Trabalho</li>
                <li class="nav-item admin-only" data-page="admin">Painel Administrativo</li>
            </ul>
            
            <div class="user-actions">
                <div id="loginButton" class="user-btn login-btn">
                    <i class="fas fa-user"></i>
                    <span>Entrar</span>
                </div>
                
                <div id="userMenu" class="user-menu hidden">
                    <img id="userAvatar" class="user-avatar" src="" alt="Avatar">
                    <div class="dropdown-menu" id="dropdownMenu">
                        <div class="dropdown-item" id="profileBtn">
                            <i class="fas fa-user"></i>
                            <span>Meu Perfil</span>
                        </div>
                        <div class="dropdown-item" id="journalistBtn">
                            <i class="fas fa-newspaper"></i>
                            <span>Painel Jornalista</span>
                        </div>
                        <div class="dropdown-item" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Sair</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- CONTEÚDO PRINCIPAL -->
    <main class="main-content">
        <div class="container" id="contentContainer">
            <!-- Home será carregada aqui por padrão -->
            <div id="homePage">
                <!-- Seção de destaque principal -->
                <section class="featured-section">
                    <div class="main-feature">
                        <div class="main-news" id="mainNews">
                            <!-- Manchete principal será carregada aqui -->
                        </div>
                        
                        <div class="secondary-news" id="secondaryNews">
                            <!-- Notícias secundárias serão carregadas aqui -->
                        </div>
                    </div>
                </section>
                
                <!-- Seção de notícias por categoria -->
                <section id="newsByCategory">
                    <!-- Notícias por categoria serão carregadas aqui -->
                </section>
            </div>
            
            <!-- Outras páginas serão carregadas aqui dinamicamente -->
        </div>
    </main>
    
    <!-- FOOTER -->
    <footer class="footer">
        <div class="container footer-container">
            <div class="footer-section">
                <h3>g1 Brookasil</h3>
                <p>O portal de notícias mais confiável da região. Informação com credibilidade e velocidade.</p>
            </div>
            
            <div class="footer-section">
                <h3>Categorias</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link" data-page="news" data-category="Política">Política</a>
                    <a href="#" class="footer-link" data-page="news" data-category="Polícia">Polícia</a>
                    <a href="#" class="footer-link" data-page="news" data-category="Educação">Educação</a>
                    <a href="#" class="footer-link" data-page="news" data-category="Esporte">Esporte</a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Links Úteis</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link" data-page="filiação">Filiação Partidária</a>
                    <a href="#" class="footer-link" data-page="candidatura">Candidatura</a>
                    <a href="#" class="footer-link" data-page="divulgação">Divulgação de Trabalho</a>
                    <a href="#" class="footer-link" data-page="admin">Painel Administrativo</a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Contato</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link">Sobre nós</a>
                    <a href="#" class="footer-link">Anuncie</a>
                    <a href="#" class="footer-link">Trabalhe conosco</a>
                    <a href="#" class="footer-link">Política de Privacidade</a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2023 g1 Brookasil. Todos os direitos reservados.</p>
            <p>Desenvolvido com tecnologia Firebase</p>
        </div>
    </footer>
    
    <!-- MODAL DE LOGIN/CADASTRO -->
    <div class="modal-overlay hidden" id="loginModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Entrar no g1 Brookasil</h3>
                <button class="modal-close" id="closeLoginModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="loginUsername">Nome de usuário</label>
                        <input type="text" class="form-input" id="loginUsername" placeholder="Digite seu usuário">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="loginPassword">Senha</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Digite sua senha">
                    </div>
                    <div class="form-buttons">
                        <button class="btn-primary" id="loginSubmit">Entrar</button>
                        <button class="btn-secondary" id="showRegister">Criar conta</button>
                    </div>
                </div>
                
                <div id="registerForm" class="hidden">
                    <div class="form-group">
                        <label class="form-label" for="registerName">Nome completo</label>
                        <input type="text" class="form-input" id="registerName" placeholder="Digite seu nome">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="registerUsername">Nome de usuário</label>
                        <input type="text" class="form-input" id="registerUsername" placeholder="Escolha um usuário">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="registerPassword">Senha</label>
                        <input type="password" class="form-input" id="registerPassword" placeholder="Digite uma senha forte">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="registerBio">Biografia (opcional)</label>
                        <textarea class="form-textarea" id="registerBio" placeholder="Conte um pouco sobre você"></textarea>
                    </div>
                    <div class="form-buttons">
                        <button class="btn-primary" id="registerSubmit">Criar conta</button>
                        <button class="btn-secondary" id="showLogin">Já tenho conta</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL DE CRIAÇÃO/EDIÇÃO DE NOTÍCIA -->
    <div class="modal-overlay hidden" id="newsModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="newsModalTitle">Criar Nova Notícia</h3>
                <button class="modal-close" id="closeNewsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="newsTitle">Título</label>
                    <input type="text" class="form-input" id="newsTitle" placeholder="Digite o título da notícia">
                </div>
                <div class="form-group">
                    <label class="form-label" for="newsSubtitle">Subtítulo</label>
                    <input type="text" class="form-input" id="newsSubtitle" placeholder="Digite um subtítulo (opcional)">
                </div>
                <div class="form-group">
                    <label class="form-label" for="newsCategory">Categoria</label>
                    <select class="form-select" id="newsCategory">
                        <option value="Política">Política</option>
                        <option value="Polícia">Polícia</option>
                        <option value="Educação">Educação</option>
                        <option value="Esporte">Esporte</option>
                        <option value="Entretenimento">Entretenimento</option>
                        <option value="Curiosidades">Curiosidades</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="newsImage">URL da Imagem</label>
                    <input type="text" class="form-input" id="newsImage" placeholder="https://exemplo.com/imagem.jpg">
                </div>
                <div class="form-group">
                    <label class="form-label" for="newsContent">Conteúdo</label>
                    <textarea class="form-textarea" id="newsContent" rows="8" placeholder="Digite o conteúdo completo da notícia"></textarea>
                </div>
                <div class="form-buttons">
                    <button class="btn-primary" id="saveNews">Publicar Notícia</button>
                    <button class="btn-secondary" id="cancelNews">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL DE EDIÇÃO DE PERFIL -->
    <div class="modal-overlay hidden" id="profileModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Editar Perfil</h3>
                <button class="modal-close" id="closeProfileModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="editName">Nome completo</label>
                    <input type="text" class="form-input" id="editName">
                </div>
                <div class="form-group">
                    <label class="form-label" for="editUsername">Nome de usuário</label>
                    <input type="text" class="form-input" id="editUsername">
                </div>
                <div class="form-group">
                    <label class="form-label" for="editBio">Biografia</label>
                    <textarea class="form-textarea" id="editBio" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="editAvatar">URL da Foto</label>
                    <input type="text" class="form-input" id="editAvatar" placeholder="https://exemplo.com/foto.jpg">
                </div>
                <div class="form-buttons">
                    <button class="btn-primary" id="saveProfile">Salvar Alterações</button>
                    <button class="btn-secondary" id="cancelProfile">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL DE ADMINISTRAÇÃO -->
    <div class="modal-overlay hidden" id="adminModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="adminModalTitle">Administração</h3>
                <button class="modal-close" id="closeAdminModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="adminModalContent">
                    <!-- Conteúdo será carregado dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPT PRINCIPAL -->
    <script>
        // ==========================================================================
        // CONFIGURAÇÃO E INICIALIZAÇÃO
        // ==========================================================================
        
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBBw4l9toAKTfXV_VqkeYKHudRC4g7yk5w",
            databaseURL: "https://g1-brookasil-default-rtdb.firebaseio.com"
        };
        
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Estado da aplicação
        const state = {
            currentUser: null,
            currentPage: 'home',
            currentCategory: null,
            currentNewsId: null,
            users: {},
            news: {},
            comments: {},
            likes: {},
            dislikes: {},
            reposts: {},
            promotions: []
        };
        
        // Elementos DOM principais
        const elements = {
            // Conteúdo
            contentContainer: document.getElementById('contentContainer'),
            homePage: document.getElementById('homePage'),
            
            // Header
            searchInput: document.getElementById('searchInput'),
            searchBtn: document.getElementById('searchBtn'),
            weatherInfo: document.getElementById('weatherInfo'),
            currentTime: document.getElementById('currentTime'),
            
            // Navegação
            navMenu: document.getElementById('navMenu'),
            mobileToggle: document.getElementById('mobileToggle'),
            
            // Usuário
            loginButton: document.getElementById('loginButton'),
            userMenu: document.getElementById('userMenu'),
            userAvatar: document.getElementById('userAvatar'),
            dropdownMenu: document.getElementById('dropdownMenu'),
            
            // Modais
            loginModal: document.getElementById('loginModal'),
            newsModal: document.getElementById('newsModal'),
            profileModal: document.getElementById('profileModal'),
            adminModal: document.getElementById('adminModal'),
            
            // Botões modais
            closeLoginModal: document.getElementById('closeLoginModal'),
            closeNewsModal: document.getElementById('closeNewsModal'),
            closeProfileModal: document.getElementById('closeProfileModal'),
            closeAdminModal: document.getElementById('closeAdminModal'),
            
            // Forms
            loginForm: document.getElementById('loginForm'),
            registerForm: document.getElementById('registerForm'),
            showRegister: document.getElementById('showRegister'),
            showLogin: document.getElementById('showLogin'),
            loginSubmit: document.getElementById('loginSubmit'),
            registerSubmit: document.getElementById('registerSubmit'),
            
            // Perfil
            editName: document.getElementById('editName'),
            editUsername: document.getElementById('editUsername'),
            editBio: document.getElementById('editBio'),
            editAvatar: document.getElementById('editAvatar'),
            saveProfile: document.getElementById('saveProfile'),
            cancelProfile: document.getElementById('cancelProfile'),
            
            // Notícias
            newsModalTitle: document.getElementById('newsModalTitle'),
            newsTitle: document.getElementById('newsTitle'),
            newsSubtitle: document.getElementById('newsSubtitle'),
            newsCategory: document.getElementById('newsCategory'),
            newsImage: document.getElementById('newsImage'),
            newsContent: document.getElementById('newsContent'),
            saveNews: document.getElementById('saveNews'),
            cancelNews: document.getElementById('cancelNews'),
            
            // Admin
            adminModalContent: document.getElementById('adminModalContent'),
            adminModalTitle: document.getElementById('adminModalTitle')
        };
        
        // ==========================================================================
        // FUNÇÕES UTILITÁRIAS
        // ==========================================================================
        
        // Formatar data
        function formatDate(date) {
            const d = new Date(date);
            const day = d.getDate().toString().padStart(2, '0');
            const month = (d.getMonth() + 1).toString().padStart(2, '0');
            const year = d.getFullYear();
            const hours = d.getHours().toString().padStart(2, '0');
            const minutes = d.getMinutes().toString().padStart(2, '0');
            
            return `${day}/${month}/${year} ${hours}:${minutes}`;
        }
        
        // Gerar ID único
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        // Verificar se é dono
        function isOwner() {
            return state.currentUser && state.currentUser.isOwner === true;
        }
        
        // Verificar se é jornalista
        function isJournalist() {
            return state.currentUser && (state.currentUser.isJournalist === true || isOwner());
        }
        
        // Mostrar mensagem de alerta
        function showAlert(message, type = 'info') {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                background: ${type === 'success' ? '#00a859' : type === 'error' ? '#ff0000' : '#0066cc'};
                color: white;
                font-weight: 600;
                z-index: 3000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
            `;
            
            alert.textContent = message;
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => document.body.removeChild(alert), 300);
            }, 3000);
            
            // Adicionar estilos de animação
            if (!document.getElementById('alertStyles')) {
                const style = document.createElement('style');
                style.id = 'alertStyles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // ==========================================================================
        // FUNÇÕES DO FIREBASE
        // ==========================================================================
        
        // Carregar dados do Firebase
        function loadFirebaseData() {
            // Carregar usuários
            database.ref('users').on('value', (snapshot) => {
                state.users = snapshot.val() || {};
                updateUserUI();
            });
            
            // Carregar notícias
            database.ref('news').on('value', (snapshot) => {
                state.news = snapshot.val() || {};
                renderCurrentPage();
            });
            
            // Carregar comentários
            database.ref('comments').on('value', (snapshot) => {
                state.comments = snapshot.val() || {};
            });
            
            // Carregar curtidas
            database.ref('likes').on('value', (snapshot) => {
                state.likes = snapshot.val() || {};
            });
            
            // Carregar descurtidas
            database.ref('dislikes').on('value', (snapshot) => {
                state.dislikes = snapshot.val() || {};
            });
            
            // Carregar reposts
            database.ref('reposts').on('value', (snapshot) => {
                state.reposts = snapshot.val() || {};
            });
            
            // Carregar promoções
            database.ref('promotions').on('value', (snapshot) => {
                state.promotions = snapshot.val() || [];
            });
        }
        
        // Salvar usuário no Firebase
        async function saveUser(user) {
            try {
                await database.ref('users/' + user.id).set(user);
                return true;
            } catch (error) {
                console.error('Erro ao salvar usuário:', error);
                return false;
            }
        }
        
        // Salvar notícia no Firebase
        async function saveNews(news) {
            try {
                await database.ref('news/' + news.id).set(news);
                return true;
            } catch (error) {
                console.error('Erro ao salvar notícia:', error);
                return false;
            }
        }
        
        // Salvar comentário no Firebase
        async function saveComment(comment) {
            try {
                await database.ref('comments/' + comment.id).set(comment);
                return true;
            } catch (error) {
                console.error('Erro ao salvar comentário:', error);
                return false;
            }
        }
        
        // Atualizar contador de interações
        async function updateInteraction(type, newsId, userId, action) {
            const ref = database.ref(`${type}/${newsId}`);
            
            try {
                if (action === 'add') {
                    await ref.child(userId).set(true);
                } else {
                    await ref.child(userId).remove();
                }
                return true;
            } catch (error) {
                console.error(`Erro ao atualizar ${type}:`, error);
                return false;
            }
        }
        
        // ==========================================================================
        // SISTEMA DE USUÁRIOS
        // ==========================================================================
        
        // Login do usuário
        async function login(username, password) {
            // Verificar se é o dono
            if (password === 'Brookasil1234') {
                // Verificar se o dono já existe
                let ownerUser = null;
                
                for (const userId in state.users) {
                    const user = state.users[userId];
                    if (user.isOwner === true) {
                        ownerUser = user;
                        break;
                    }
                }
                
                // Se não existe, criar o dono
                if (!ownerUser) {
                    ownerUser = {
                        id: generateId(),
                        name: 'Dono do RP',
                        username: username,
                        bio: 'Administrador principal do g1 Brookasil',
                        isOwner: true,
                        isJournalist: true,
                        createdAt: Date.now(),
                        avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=owner'
                    };
                    
                    await saveUser(ownerUser);
                }
                
                state.currentUser = ownerUser;
                showAlert('Login realizado como DONO do sistema!', 'success');
                return true;
            }
            
            // Buscar usuário comum
            for (const userId in state.users) {
                const user = state.users[userId];
                if (user.username === username) {
                    state.currentUser = user;
                    showAlert('Login realizado com sucesso!', 'success');
                    return true;
                }
            }
            
            showAlert('Usuário não encontrado!', 'error');
            return false;
        }
        
        // Registrar novo usuário
        async function register(name, username, password, bio) {
            // Verificar se o usuário já existe
            for (const userId in state.users) {
                const user = state.users[userId];
                if (user.username === username) {
                    showAlert('Nome de usuário já está em uso!', 'error');
                    return false;
                }
            }
            
            // Criar novo usuário
            const newUser = {
                id: generateId(),
                name: name,
                username: username,
                bio: bio || '',
                isOwner: false,
                isJournalist: false,
                isBanned: false,
                createdAt: Date.now(),
                avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`
            };
            
            const success = await saveUser(newUser);
            
            if (success) {
                state.currentUser = newUser;
                showAlert('Conta criada com sucesso!', 'success');
                return true;
            } else {
                showAlert('Erro ao criar conta!', 'error');
                return false;
            }
        }
        
        // Logout do usuário
        function logout() {
            state.currentUser = null;
            showAlert('Logout realizado com sucesso!', 'success');
            updateUserUI();
        }
        
        // Atualizar perfil do usuário
        async function updateProfile(name, username, bio, avatar) {
            if (!state.currentUser) return false;
            
            // Verificar se o novo username já está em uso por outro usuário
            for (const userId in state.users) {
                const user = state.users[userId];
                if (user.username === username && user.id !== state.currentUser.id) {
                    showAlert('Nome de usuário já está em uso!', 'error');
                    return false;
                }
            }
            
            // Atualizar dados
            state.currentUser.name = name;
            state.currentUser.username = username;
            state.currentUser.bio = bio;
            if (avatar) state.currentUser.avatar = avatar;
            
            const success = await saveUser(state.currentUser);
            
            if (success) {
                showAlert('Perfil atualizado com sucesso!', 'success');
                return true;
            } else {
                showAlert('Erro ao atualizar perfil!', 'error');
                return false;
            }
        }
        
        // ==========================================================================
        // SISTEMA DE NOTÍCIAS
        // ==========================================================================
        
        // Criar nova notícia
        async function createNews(title, subtitle, category, image, content) {
            if (!state.currentUser) return false;
            
            const newsId = generateId();
            const news = {
                id: newsId,
                title: title,
                subtitle: subtitle || '',
                category: category,
                image: image || 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
                content: content,
                authorId: state.currentUser.id,
                authorName: state.currentUser.name,
                authorUsername: state.currentUser.username,
                createdAt: Date.now(),
                isFeatured: false,
                isPinned: false,
                likesCount: 0,
                dislikesCount: 0,
                repostsCount: 0,
                commentsCount: 0
            };
            
            const success = await saveNews(news);
            
            if (success) {
                showAlert('Notícia publicada com sucesso!', 'success');
                return true;
            } else {
                showAlert('Erro ao publicar notícia!', 'error');
                return false;
            }
        }
        
        // Editar notícia
        async function editNews(newsId, title, subtitle, category, image, content) {
            if (!state.currentUser) return false;
            
            const news = state.news[newsId];
            if (!news) return false;
            
            // Verificar permissão (dono pode editar qualquer notícia)
            if (!isOwner() && news.authorId !== state.currentUser.id) {
                showAlert('Você não tem permissão para editar esta notícia!', 'error');
                return false;
            }
            
            // Atualizar dados
            news.title = title;
            news.subtitle = subtitle || '';
            news.category = category;
            if (image) news.image = image;
            news.content = content;
            news.updatedAt = Date.now();
            
            const success = await saveNews(news);
            
            if (success) {
                showAlert('Notícia atualizada com sucesso!', 'success');
                return true;
            } else {
                showAlert('Erro ao atualizar notícia!', 'error');
                return false;
            }
        }
        
        // Excluir notícia
        async function deleteNews(newsId) {
            if (!state.currentUser) return false;
            
            const news = state.news[newsId];
            if (!news) return false;
            
            // Verificar permissão (dono pode excluir qualquer notícia)
            if (!isOwner() && news.authorId !== state.currentUser.id) {
                showAlert('Você não tem permissão para excluir esta notícia!', 'error');
                return false;
            }
            
            try {
                await database.ref('news/' + newsId).remove();
                showAlert('Notícia excluída com sucesso!', 'success');
                return true;
            } catch (error) {
                console.error('Erro ao excluir notícia:', error);
                showAlert('Erro ao excluir notícia!', 'error');
                return false;
            }
        }
        
        // ==========================================================================
        // SISTEMA DE INTERAÇÕES
        // ==========================================================================
        
        // Curtir notícia
        async function likeNews(newsId) {
            if (!state.currentUser) {
                showAlert('Você precisa estar logado para curtir!', 'error');
                return false;
            }
            
            const userId = state.currentUser.id;
            const alreadyLiked = state.likes[newsId] && state.likes[newsId][userId];
            
            if (alreadyLiked) {
                // Remover curtida
                await updateInteraction('likes', newsId, userId, 'remove');
                
                // Atualizar contador
                if (state.news[newsId]) {
                    state.news[newsId].likesCount = Math.max(0, (state.news[newsId].likesCount || 0) - 1);
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Curtida removida!', 'info');
            } else {
                // Adicionar curtida
                await updateInteraction('likes', newsId, userId, 'add');
                
                // Remover descurtida se existir
                if (state.dislikes[newsId] && state.dislikes[newsId][userId]) {
                    await updateInteraction('dislikes', newsId, userId, 'remove');
                }
                
                // Atualizar contadores
                if (state.news[newsId]) {
                    state.news[newsId].likesCount = (state.news[newsId].likesCount || 0) + 1;
                    
                    // Reduzir descurtida se existia
                    if (state.dislikes[newsId] && state.dislikes[newsId][userId]) {
                        state.news[newsId].dislikesCount = Math.max(0, (state.news[newsId].dislikesCount || 0) - 1);
                    }
                    
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Notícia curtida!', 'success');
            }
            
            return true;
        }
        
        // Descurtir notícia
        async function dislikeNews(newsId) {
            if (!state.currentUser) {
                showAlert('Você precisa estar logado para descurtir!', 'error');
                return false;
            }
            
            const userId = state.currentUser.id;
            const alreadyDisliked = state.dislikes[newsId] && state.dislikes[newsId][userId];
            
            if (alreadyDisliked) {
                // Remover descurtida
                await updateInteraction('dislikes', newsId, userId, 'remove');
                
                // Atualizar contador
                if (state.news[newsId]) {
                    state.news[newsId].dislikesCount = Math.max(0, (state.news[newsId].dislikesCount || 0) - 1);
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Descurtida removida!', 'info');
            } else {
                // Adicionar descurtida
                await updateInteraction('dislikes', newsId, userId, 'add');
                
                // Remover curtida se existir
                if (state.likes[newsId] && state.likes[newsId][userId]) {
                    await updateInteraction('likes', newsId, userId, 'remove');
                }
                
                // Atualizar contadores
                if (state.news[newsId]) {
                    state.news[newsId].dislikesCount = (state.news[newsId].dislikesCount || 0) + 1;
                    
                    // Reduzir curtida se existia
                    if (state.likes[newsId] && state.likes[newsId][userId]) {
                        state.news[newsId].likesCount = Math.max(0, (state.news[newsId].likesCount || 0) - 1);
                    }
                    
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Notícia descurtida!', 'success');
            }
            
            return true;
        }
        
        // Republicar notícia
        async function repostNews(newsId) {
            if (!state.currentUser) {
                showAlert('Você precisa estar logado para republicar!', 'error');
                return false;
            }
            
            const userId = state.currentUser.id;
            const alreadyReposted = state.reposts[newsId] && state.reposts[newsId][userId];
            
            if (alreadyReposted) {
                // Remover repost
                await updateInteraction('reposts', newsId, userId, 'remove');
                
                // Atualizar contador
                if (state.news[newsId]) {
                    state.news[newsId].repostsCount = Math.max(0, (state.news[newsId].repostsCount || 0) - 1);
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Republicação removida!', 'info');
            } else {
                // Adicionar repost
                await updateInteraction('reposts', newsId, userId, 'add');
                
                // Atualizar contador
                if (state.news[newsId]) {
                    state.news[newsId].repostsCount = (state.news[newsId].repostsCount || 0) + 1;
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Notícia republicada!', 'success');
            }
            
            return true;
        }
        
        // Comentar em notícia
        async function commentOnNews(newsId, text, parentId = null) {
            if (!state.currentUser) {
                showAlert('Você precisa estar logado para comentar!', 'error');
                return false;
            }
            
            if (!text.trim()) {
                showAlert('Digite um comentário!', 'error');
                return false;
            }
            
            const commentId = generateId();
            const comment = {
                id: commentId,
                newsId: newsId,
                userId: state.currentUser.id,
                userName: state.currentUser.name,
                userUsername: state.currentUser.username,
                userAvatar: state.currentUser.avatar,
                text: text,
                parentId: parentId,
                createdAt: Date.now()
            };
            
            const success = await saveComment(comment);
            
            if (success) {
                // Atualizar contador de comentários na notícia
                if (state.news[newsId]) {
                    state.news[newsId].commentsCount = (state.news[newsId].commentsCount || 0) + 1;
                    await saveNews(state.news[newsId]);
                }
                
                showAlert('Comentário publicado!', 'success');
                return true;
            } else {
                showAlert('Erro ao publicar comentário!', 'error');
                return false;
            }
        }
        
        // Excluir comentário
        async function deleteComment(commentId) {
            if (!isOwner()) {
                showAlert('Apenas o dono pode excluir comentários!', 'error');
                return false;
            }
            
            try {
                await database.ref('comments/' + commentId).remove();
                showAlert('Comentário excluído!', 'success');
                return true;
            } catch (error) {
                console.error('Erro ao excluir comentário:', error);
                showAlert('Erro ao excluir comentário!', 'error');
                return false;
            }
        }
        
        // ==========================================================================
        // FUNÇÕES DE UI
        // ==========================================================================
        
        // Atualizar UI do usuário
        function updateUserUI() {
            if (state.currentUser) {
                // Mostrar menu do usuário
                elements.loginButton.classList.add('hidden');
                elements.userMenu.classList.remove('hidden');
                
                // Atualizar avatar
                elements.userAvatar.src = state.currentUser.avatar;
                elements.userAvatar.alt = state.currentUser.name;
                
                // Mostrar/ocultar itens de admin
                const adminItems = document.querySelectorAll('.admin-only');
                adminItems.forEach(item => {
                    if (isOwner()) {
                        item.classList.remove('hidden');
                    } else {
                        item.classList.add('hidden');
                    }
                });
            } else {
                // Mostrar botão de login
                elements.loginButton.classList.remove('hidden');
                elements.userMenu.classList.add('hidden');
                
                // Ocultar itens de admin
                const adminItems = document.querySelectorAll('.admin-only');
                adminItems.forEach(item => item.classList.add('hidden'));
            }
        }
        
        // Renderizar página atual
        function renderCurrentPage() {
            elements.contentContainer.innerHTML = '';
            
            switch (state.currentPage) {
                case 'home':
                    renderHomePage();
                    break;
                case 'news':
                    renderNewsPage();
                    break;
                case 'news-detail':
                    renderNewsDetailPage();
                    break;
                case 'profile':
                    renderProfilePage();
                    break;
                case 'journalist':
                    renderJournalistPanel();
                    break;
                case 'admin':
                    renderAdminPanel();
                    break;
                case 'filiação':
                    renderFiliacaoPage();
                    break;
                case 'candidatura':
                    renderCandidaturaPage();
                    break;
                case 'divulgação':
                    renderDivulgacaoPage();
                    break;
                default:
                    renderHomePage();
            }
        }
        
        // Renderizar página inicial
        function renderHomePage() {
            const container = document.createElement('div');
            container.id = 'homePage';
            
            // Obter notícias mais recentes
            const allNews = Object.values(state.news).sort((a, b) => b.createdAt - a.createdAt);
            const featuredNews = allNews.filter(news => news.isFeatured).slice(0, 1);
            const mainNews = featuredNews.length > 0 ? featuredNews[0] : allNews[0];
            
            if (mainNews) {
                // Seção de destaque principal
                const featuredSection = document.createElement('section');
                featuredSection.className = 'featured-section';
                
                const mainFeature = document.createElement('div');
                mainFeature.className = 'main-feature';
                
                // Notícia principal
                const mainNewsDiv = document.createElement('div');
                mainNewsDiv.className = 'main-news';
                mainNewsDiv.innerHTML = `
                    <img src="${mainNews.image}" alt="${mainNews.title}">
                    <div class="main-news-overlay">
                        <span class="main-news-category">${mainNews.category}</span>
                        <h2 class="main-news-title">${mainNews.title}</h2>
                        <div class="main-news-author">Por ${mainNews.authorName}</div>
                    </div>
                `;
                mainNewsDiv.onclick = () => openNewsDetail(mainNews.id);
                
                // Notícias secundárias
                const secondaryNews = allNews.slice(1, 4);
                const secondaryDiv = document.createElement('div');
                secondaryDiv.className = 'secondary-news';
                
                secondaryNews.forEach(news => {
                    const item = document.createElement('div');
                    item.className = 'secondary-item';
                    item.innerHTML = `
                        <img src="${news.image}" alt="${news.title}" class="secondary-img">
                        <div class="secondary-content">
                            <span class="news-category" style="background: var(--azul-principal);">${news.category}</span>
                            <h3 class="secondary-title">${news.title}</h3>
                            <div class="news-meta">
                                <span class="news-author">${news.authorName}</span>
                                <span>${formatDate(news.createdAt)}</span>
                            </div>
                        </div>
                    `;
                    item.onclick = () => openNewsDetail(news.id);
                    secondaryDiv.appendChild(item);
                });
                
                mainFeature.appendChild(mainNewsDiv);
                mainFeature.appendChild(secondaryDiv);
                featuredSection.appendChild(mainFeature);
                container.appendChild(featuredSection);
                
                // Seção por categorias
                const categories = ['Política', 'Polícia', 'Educação', 'Esporte', 'Entretenimento', 'Curiosidades'];
                
                categories.forEach(category => {
                    const categoryNews = allNews.filter(news => news.category === category).slice(0, 4);
                    
                    if (categoryNews.length > 0) {
                        const section = document.createElement('section');
                        section.className = 'category-section';
                        section.style.marginBottom = '40px';
                        
                        const sectionHeader = document.createElement('div');
                        sectionHeader.className = 'section-header';
                        
                        const title = document.createElement('h2');
                        title.className = 'section-title';
                        title.textContent = category;
                        
                        const seeMore = document.createElement('a');
                        seeMore.href = '#';
                        seeMore.className = 'see-more';
                        seeMore.innerHTML = 'Ver mais <i class="fas fa-arrow-right"></i>';
                        seeMore.onclick = (e) => {
                            e.preventDefault();
                            state.currentCategory = category;
                            state.currentPage = 'news';
                            renderCurrentPage();
                        };
                        
                        sectionHeader.appendChild(title);
                        sectionHeader.appendChild(seeMore);
                        section.appendChild(sectionHeader);
                        
                        const newsGrid = document.createElement('div');
                        newsGrid.className = 'news-grid';
                        
                        categoryNews.forEach(news => {
                            const card = createNewsCard(news);
                            newsGrid.appendChild(card);
                        });
                        
                        section.appendChild(newsGrid);
                        container.appendChild(section);
                    }
                });
            } else {
                // Nenhuma notícia cadastrada
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px;">
                        <i class="fas fa-newspaper" style="font-size: 4rem; color: var(--cinza-medio); margin-bottom: 20px;"></i>
                        <h2 style="font-size: 1.8rem; margin-bottom: 15px; color: var(--preto-suave);">Nenhuma notícia publicada</h2>
                        <p style="color: var(--cinza-escuro); margin-bottom: 30px;">Seja o primeiro a publicar uma notícia!</p>
                        ${state.currentUser && isJournalist() ? 
                            `<button class="btn-primary" onclick="openCreateNewsModal()" style="padding: 12px 30px; font-size: 1.1rem;">
                                <i class="fas fa-plus"></i> Criar Primeira Notícia
                            </button>` : 
                            `<p style="color: var(--azul-principal);">Faça login como jornalista para publicar notícias</p>`
                        }
                    </div>
                `;
            }
            
            elements.contentContainer.appendChild(container);
        }
        
        // Criar card de notícia
        function createNewsCard(news) {
            const card = document.createElement('div');
            card.className = 'news-card';
            card.onclick = () => openNewsDetail(news.id);
            
            card.innerHTML = `
                <img src="${news.image}" alt="${news.title}" class="news-img">
                <div class="news-content">
                    <span class="news-category">${news.category}</span>
                    <h3 class="news-title">${news.title}</h3>
                    <div class="news-meta">
                        <span class="news-author">${news.authorName}</span>
                        <span>${formatDate(news.createdAt)}</span>
                    </div>
                </div>
            `;
            
            return card;
        }
        
        // Renderizar página de notícias por categoria
        function renderNewsPage() {
            const container = document.createElement('div');
            container.id = 'newsPage';
            
            const allNews = Object.values(state.news).sort((a, b) => b.createdAt - a.createdAt);
            const filteredNews = state.currentCategory ? 
                allNews.filter(news => news.category === state.currentCategory) : 
                allNews;
            
            const sectionHeader = document.createElement('div');
            sectionHeader.className = 'section-header';
            
            const title = document.createElement('h2');
            title.className = 'section-title';
            title.textContent = state.currentCategory || 'Todas as Notícias';
            
            sectionHeader.appendChild(title);
            container.appendChild(sectionHeader);
            
            if (filteredNews.length > 0) {
                const newsGrid = document.createElement('div');
                newsGrid.className = 'news-grid';
                
                filteredNews.forEach(news => {
                    const card = createNewsCard(news);
                    newsGrid.appendChild(card);
                });
                
                container.appendChild(newsGrid);
            } else {
                container.innerHTML += `
                    <div style="text-align: center; padding: 60px 20px;">
                        <i class="fas fa-newspaper" style="font-size: 4rem; color: var(--cinza-medio); margin-bottom: 20px;"></i>
                        <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: var(--preto-suave);">Nenhuma notícia encontrada</h3>
                        <p style="color: var(--cinza-escuro);">Não há notícias na categoria "${state.currentCategory}" ainda.</p>
                    </div>
                `;
            }
            
            elements.contentContainer.appendChild(container);
        }
        
        // Abrir detalhe da notícia
        function openNewsDetail(newsId) {
            state.currentNewsId = newsId;
            state.currentPage = 'news-detail';
            renderCurrentPage();
        }
        
        // Renderizar página de detalhe da notícia
        function renderNewsDetailPage() {
            const news = state.news[state.currentNewsId];
            
            if (!news) {
                elements.contentContainer.innerHTML = `
                    <div style="text-align: center; padding: 100px 20px;">
                        <h2 style="color: var(--cinza-escuro);">Notícia não encontrada</h2>
                        <button class="btn-primary" onclick="state.currentPage='home'; renderCurrentPage();" style="margin-top: 20px;">
                            Voltar para Home
                        </button>
                    </div>
                `;
                return;
            }
            
            const container = document.createElement('div');
            container.className = 'news-detail';
            
            // Verificar interações do usuário atual
            const userId = state.currentUser ? state.currentUser.id : null;
            const hasLiked = userId && state.likes[news.id] && state.likes[news.id][userId];
            const hasDisliked = userId && state.dislikes[news.id] && state.dislikes[news.id][userId];
            const hasReposted = userId && state.reposts[news.id] && state.reposts[news.id][userId];
            
            // Obter comentários desta notícia
            const newsComments = Object.values(state.comments)
                .filter(comment => comment.newsId === news.id && !comment.parentId)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            container.innerHTML = `
                <div class="news-detail-header">
                    <span class="detail-category">${news.category}</span>
                    <h1 class="detail-title">${news.title}</h1>
                    ${news.subtitle ? `<h2 class="detail-subtitle">${news.subtitle}</h2>` : ''}
                    
                    <div class="detail-meta">
                        <img src="${state.users[news.authorId]?.avatar || 'https://api.dicebear.com/7.x/avataaars/svg?seed=' + news.authorId}" 
                             alt="${news.authorName}" class="detail-author-img">
                        <div class="detail-author-info">
                            <div class="detail-author-name">${news.authorName}</div>
                            <div class="detail-date">Publicado em ${formatDate(news.createdAt)}</div>
                        </div>
                    </div>
                    
                    <img src="${news.image}" alt="${news.title}" class="detail-image">
                </div>
                
                <div class="detail-content">
                    ${news.content.split('\n').map(paragraph => `<p>${paragraph}</p>`).join('')}
                </div>
                
                <div class="news-interactions">
                    <button class="interaction-btn like-btn ${hasLiked ? 'active' : ''}" onclick="likeNews('${news.id}')">
                        <i class="fas fa-thumbs-up"></i>
                        <span>Curtir</span>
                        <span class="count">${news.likesCount || 0}</span>
                    </button>
                    
                    <button class="interaction-btn dislike-btn ${hasDisliked ? 'active' : ''}" onclick="dislikeNews('${news.id}')">
                        <i class="fas fa-thumbs-down"></i>
                        <span>Descurtir</span>
                        <span class="count">${news.dislikesCount || 0}</span>
                    </button>
                    
                    <button class="interaction-btn repost-btn ${hasReposted ? 'active' : ''}" onclick="repostNews('${news.id}')">
                        <i class="fas fa-retweet"></i>
                        <span>Republicar</span>
                        <span class="count">${news.repostsCount || 0}</span>
                    </button>
                    
                    ${isOwner() || (state.currentUser && state.currentUser.id === news.authorId) ? `
                        <div style="margin-left: auto; display: flex; gap: 10px;">
                            <button class="action-btn edit-btn" onclick="openEditNewsModal('${news.id}')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteNews('${news.id}')">
                                <i class="fas fa-trash"></i> Excluir
                            </button>
                        </div>
                    ` : ''}
                </div>
                
                <div class="comments-section">
                    <div class="comment-form">
                        <h3 style="margin-bottom: 15px;">Comentar</h3>
                        ${state.currentUser ? `
                            <textarea class="comment-input" id="newCommentText" placeholder="Digite seu comentário..."></textarea>
                            <button class="comment-submit" onclick="submitComment('${news.id}')">Publicar Comentário</button>
                        ` : `
                            <p style="color: var(--cinza-escuro); margin-bottom: 15px;">Faça login para comentar</p>
                            <button class="btn-primary" onclick="openLoginModal()">Fazer Login</button>
                        `}
                    </div>
                    
                    <h3 style="margin-bottom: 20px;">Comentários (${newsComments.length})</h3>
                    
                    <div class="comments-list" id="commentsList">
                        ${newsComments.length > 0 ? 
                            newsComments.map(comment => renderComment(comment)).join('') : 
                            '<p style="text-align: center; color: var(--cinza-escuro); padding: 30px;">Nenhum comentário ainda. Seja o primeiro!</p>'
                        }
                    </div>
                </div>
            `;
            
            elements.contentContainer.appendChild(container);
        }
        
        // Renderizar um comentário
        function renderComment(comment) {
            // Obter respostas deste comentário
            const replies = Object.values(state.comments)
                .filter(c => c.parentId === comment.id)
                .sort((a, b) => a.createdAt - b.createdAt);
            
            return `
                <div class="comment" id="comment-${comment.id}">
                    <img src="${comment.userAvatar}" alt="${comment.userName}" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-header">
                            <div>
                                <div class="comment-user">${comment.userName}</div>
                                <div class="comment-username">@${comment.userUsername}</div>
                            </div>
                            <div class="comment-date">${formatDate(comment.createdAt)}</div>
                        </div>
                        <div class="comment-text">${comment.text}</div>
                        <div class="comment-actions">
                            <span class="comment-action" onclick="replyToComment('${comment.id}')">
                                <i class="fas fa-reply"></i> Responder
                            </span>
                            ${isOwner() ? `
                                <span class="comment-action" onclick="deleteComment('${comment.id}')" style="color: #ff0000;">
                                    <i class="fas fa-trash"></i> Excluir
                                </span>
                            ` : ''}
                        </div>
                        
                        ${replies.length > 0 ? `
                            <div class="comment-replies">
                                ${replies.map(reply => renderComment(reply)).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        // Renderizar página de filiação partidária
        function renderFiliacaoPage() {
            const container = document.createElement('div');
            container.className = 'info-page';
            
            container.innerHTML = `
                <h1 class="info-title">Filiação Partidária</h1>
                <div class="info-content">
                    <h3>Como se filiar a um partido político?</h3>
                    <p>A filiação partidária é o primeiro passo para quem deseja participar ativamente da política. É através dela que você se torna membro oficial de um partido político e pode participar das decisões internas, além de poder se candidatar a cargos eletivos.</p>
                    
                    <h3>Requisitos básicos:</h3>
                    <ul>
                        <li>Ter título de eleitor regular</li>
                        <li>Não possuir filiação ativa em outro partido</li>
                        <li>Estar quite com as obrigações militares (para homens)</li>
                        <li>Não ter sido condenado por crime inelegível</li>
                    </ul>
                    
                    <h3>Passo a passo:</h3>
                    <ol>
                        <li>Escolha o partido político de sua preferência</li>
                        <li>Procure a sede do partido em sua cidade</li>
                        <li>Preencha a ficha de filiação</li>
                        <li>Apresente os documentos necessários</li>
                        <li>Aguarde a confirmação da filiação</li>
                    </ol>
                    
                    <h3>Documentos necessários:</h3>
                    <ul>
                        <li>Cópia do título de eleitor</li>
                        <li>Cópia da carteira de identidade (RG)</li>
                        <li>Cópia do CPF</li>
                        <li>Comprovante de residência</li>
                        <li>Foto 3x4 recente</li>
                    </ul>
                    
                    <a href="https://tsedoroblox2025.github.io/filia-o.html/" target="_blank" class="external-link">
                        <i class="fas fa-external-link-alt"></i> Acesse o Sistema de Filiação
                    </a>
                </div>
            `;
            
            elements.contentContainer.appendChild(container);
        }
        
        // Renderizar página de candidatura
        function renderCandidaturaPage() {
            const container = document.createElement('div');
            container.className = 'info-page';
            
            container.innerHTML = `
                <h1 class="info-title">Candidatura</h1>
                <div class="info-content">
                    <h3>Como se candidatar a um cargo político?</h3>
                    <p>Se candidatar a um cargo eletivo é um processo que requer planejamento e atendimento a vários requisitos legais. Este guia vai te ajudar a entender os passos necessários.</p>
                    
                    <h3>Pré-requisitos:</h3>
                    <ul>
                        <li>Ser filiado a um partido político há pelo menos 6 meses (para cargos majoritários)</li>
                        <li>Ter domicílio eleitoral na circunscrição pelo menos 1 ano antes da eleição</li>
                        <li>Possuir nacionalidade brasileira</li>
                        <li>Estar quite com as obrigações militares e eleitorais</li>
                        <li>Gozar do pleno exercício dos direitos políticos</li>
                    </ul>
                    
                    <h3>Cargos disponíveis:</h3>
                    <ul>
                        <li><strong>Prefeito</strong>: Requer idade mínima de 21 anos</li>
                        <li><strong>Vereador</strong>: Requer idade mínima de 18 anos</li>
                        <li><strong>Deputado Estadual</strong>: Requer idade mínima de 21 anos</li>
                        <li><strong>Deputado Federal</strong>: Requer idade mínima de 21 anos</li>
                        <li><strong>Senador</strong>: Requer idade mínima de 35 anos</li>
                        <li><strong>Governador</strong>: Requer idade mínima de 30 anos</li>
                        <li><strong>Presidente</strong>: Requer idade mínima de 35 anos</li>
                    </ul>
                    
                    <h3>Processo de candidatura:</h3>
                    <ol>
                        <li>Filiação partidária (com tempo mínimo exigido)</li>
                        <li>Participação das prévias partidárias (se houver)</li>
                        <li>Indicação pelo partido político</li>
                        <li>Registro da candidatura na Justiça Eleitoral</li>
                        <li>Prestação de contas eleitorais</li>
                        <li>Campanha eleitoral (dentro do período permitido)</li>
                    </ol>
                    
                    <a href="https://tsedoroblox2025.github.io/candidatura-cde/" target="_blank" class="external-link">
                        <i class="fas fa-external-link-alt"></i> Acesse o Sistema de Candidatura
                    </a>
                </div>
            `;
            
            elements.contentContainer.appendChild(container);
        }
        
        // Renderizar página de divulgação
        function renderDivulgacaoPage() {
            const container = document.createElement('div');
            container.className = 'info-page';
            
            if (!state.currentUser) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px;">
                        <i class="fas fa-user-lock" style="font-size: 4rem; color: var(--cinza-medio); margin-bottom: 20px;"></i>
                        <h2 style="font-size: 1.8rem; margin-bottom: 15px; color: var(--preto-suave);">Acesso Restrito</h2>
                        <p style="color: var(--cinza-escuro); margin-bottom: 30px;">Você precisa estar logado para acessar a divulgação de trabalho.</p>
                        <button class="btn-primary" onclick="openLoginModal()" style="padding: 12px 30px; font-size: 1.1rem;">
                            <i class="fas fa-sign-in-alt"></i> Fazer Login
                        </button>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <h1 class="info-title">Divulgação de Trabalho</h1>
                    <div class="info-content">
                        <h3>Como divulgar seu trabalho?</h3>
                        <p>Esta seção é destinada à divulgação de trabalhos, projetos e serviços dos nossos usuários. Para solicitar a divulgação, preencha o formulário abaixo.</p>
                        
                        <div class="form-group" style="margin-top: 30px;">
                            <label class="form-label">Título do Trabalho</label>
                            <input type="text" class="form-input" id="workTitle" placeholder="Digite o título do seu trabalho">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Categoria</label>
                            <select class="form-select" id="workCategory">
                                <option value="Design Gráfico">Design Gráfico</option>
                                <option value="Desenvolvimento Web">Desenvolvimento Web</option>
                                <option value="Consultoria">Consultoria</option>
                                <option value="Educação">Educação</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Descrição Detalhada</label>
                            <textarea class="form-textarea" id="workDescription" rows="6" placeholder="Descreva seu trabalho em detalhes..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Link (opcional)</label>
                            <input type="text" class="form-input" id="workLink" placeholder="https://exemplo.com">
                        </div>
                        
                        <div class="form-buttons">
                            <button class="btn-primary" onclick="submitWork()">
                                <i class="fas fa-paper-plane"></i> Enviar para Análise
                            </button>
                        </div>
                        
                        <h3 style="margin-top: 40px;">Status das Divulgações</h3>
                        <p>Suas divulgações serão analisadas pela nossa equipe. O status pode ser:</p>
                        <ul>
                            <li><strong style="color: #ffa500;">Em análise</strong>: Aguardando avaliação</li>
                            <li><strong style="color: #00a859;">Aprovado</strong>: Divulgação publicada</li>
                            <li><strong style="color: #ff0000;">Recusado</strong>: Divulgação não aprovada</li>
                        </ul>
                    </div>
                `;
            }
            
            elements.contentContainer.appendChild(container);
        }
        
        // Renderizar painel do jornalista
        function renderJournalistPanel() {
            if (!state.currentUser || !isJournalist()) {
                elements.contentContainer.innerHTML = `
                    <div style="text-align: center; padding: 100px 20px;">
                        <i class="fas fa-user-lock" style="font-size: 4rem; color: var(--cinza-medio); margin-bottom: 20px;"></i>
                        <h2 style="font-size: 1.8rem; margin-bottom: 15px; color: var(--preto-suave);">Acesso Restrito</h2>
                        <p style="color: var(--cinza-escuro); margin-bottom: 30px;">Apenas jornalistas podem acessar este painel.</p>
                        <button class="btn-primary" onclick="state.currentPage='home'; renderCurrentPage();" style="padding: 12px 30px;">
                            Voltar para Home
                        </button>
                    </div>
                `;
                return;
            }
            
            const container = document.createElement('div');
            container.className = 'admin-panel';
            
            // Obter notícias do jornalista atual
            const journalistNews = Object.values(state.news)
                .filter(news => news.authorId === state.currentUser.id)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            container.innerHTML = `
                <div class="admin-header">
                    <h2 class="admin-title">Painel do Jornalista</h2>
                    <button class="btn-primary" onclick="openCreateNewsModal()">
                        <i class="fas fa-plus"></i> Nova Notícia
                    </button>
                </div>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-number">${journalistNews.length}</div>
                        <div class="stat-label">Notícias Publicadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-number">${journalistNews.reduce((sum, news) => sum + (news.likesCount || 0), 0)}</div>
                        <div class="stat-label">Total de Curtidas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-number">${journalistNews.reduce((sum, news) => sum + (news.commentsCount || 0), 0)}</div>
                        <div class="stat-label">Total de Comentários</div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 20px;">Minhas Notícias</h3>
                
                ${journalistNews.length > 0 ? `
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Categoria</th>
                                <th>Data</th>
                                <th>Interações</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${journalistNews.map(news => `
                                <tr>
                                    <td>${news.title}</td>
                                    <td><span class="news-category" style="font-size: 0.8rem;">${news.category}</span></td>
                                    <td>${formatDate(news.createdAt)}</td>
                                    <td>
                                        <span style="color: var(--azul-principal);"><i class="fas fa-thumbs-up"></i> ${news.likesCount || 0}</span> | 
                                        <span style="color: #ff0000;"><i class="fas fa-thumbs-down"></i> ${news.dislikesCount || 0}</span> | 
                                        <span style="color: var(--verde-brookasil);"><i class="fas fa-comment"></i> ${news.commentsCount || 0}</span>
                                    </td>
                                    <td>
                                        <div class="table-actions">
                                            <button class="action-btn edit-btn" onclick="openEditNewsModal('${news.id}')">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete-btn" onclick="deleteNews('${news.id}')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                            <button class="action-btn" onclick="openNewsDetail('${news.id}')" style="background: rgba(0,0,0,0.1); color: var(--preto-suave);">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                ` : `
                    <div style="text-align: center; padding: 40px 20px; color: var(--cinza-escuro);">
                        <i class="fas fa-newspaper" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <p>Você ainda não publicou nenhuma notícia.</p>
                        <button class="btn-primary" onclick="openCreateNewsModal()" style="margin-top: 15px;">
                            <i class="fas fa-plus"></i> Criar Primeira Notícia
                        </button>
                    </div>
                `}
            `;
            
            elements.contentContainer.appendChild(container);
        }
        
        // Renderizar painel do administrador
        function renderAdminPanel() {
            if (!state.currentUser || !isOwner()) {
                elements.contentContainer.innerHTML = `
                    <div style="text-align: center; padding: 100px 20px;">
                        <i class="fas fa-user-shield" style="font-size: 4rem; color: var(--cinza-medio); margin-bottom: 20px;"></i>
                        <h2 style="font-size: 1.8rem; margin-bottom: 15px; color: var(--preto-suave);">Acesso Restrito</h2>
                        <p style="color: var(--cinza-escuro); margin-bottom: 30px;">Apenas o dono do sistema pode acessar este painel.</p>
                        <button class="btn-primary" onclick="state.currentPage='home'; renderCurrentPage();" style="padding: 12px 30px;">
                            Voltar para Home
                        </button>
                    </div>
                `;
                return;
            }
            
            const container = document.createElement('div');
            container.className = 'admin-panel';
            
            // Estatísticas gerais
            const totalUsers = Object.keys(state.users).length;
            const totalNews = Object.keys(state.news).length;
            const totalComments = Object.keys(state.comments).length;
            const totalLikes = Object.values(state.likes).reduce((sum, newsLikes) => sum + Object.keys(newsLikes || {}).length, 0);
            const totalDislikes = Object.values(state.dislikes).reduce((sum, newsDislikes) => sum + Object.keys(newsDislikes || {}).length, 0);
            const totalReposts = Object.values(state.reposts).reduce((sum, newsReposts) => sum + Object.keys(newsReposts || {}).length, 0);
            
            container.innerHTML = `
                <div class="admin-header">
                    <h2 class="admin-title">Painel de Administração</h2>
                    <div style="color: var(--verde-brookasil); font-weight: 600;">
                        <i class="fas fa-crown"></i> Modo Dono
                    </div>
                </div>
                
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="stats">Estatísticas</div>
                    <div class="admin-tab" data-tab="users">Usuários</div>
                    <div class="admin-tab" data-tab="news">Notícias</div>
                    <div class="admin-tab" data-tab="comments">Comentários</div>
                </div>
                
                <div id="adminTabContent">
                    <!-- Conteúdo será carregado dinamicamente -->
                </div>
            `;
            
            elements.contentContainer.appendChild(container);
            
            // Adicionar eventos às abas
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.onclick = () => {
                    // Remover classe active de todas as abas
                    document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                    // Adicionar classe active à aba clicada
                    tab.classList.add('active');
                    // Carregar conteúdo da aba
                    loadAdminTab(tab.dataset.tab);
                };
            });
            
            // Carregar primeira aba
            loadAdminTab('stats');
        }
        
        // Carregar conteúdo da aba do admin
        function loadAdminTab(tabName) {
            const contentDiv = document.getElementById('adminTabContent');
            
            switch (tabName) {
                case 'stats':
                    const totalUsers = Object.keys(state.users).length;
                    const totalNews = Object.keys(state.news).length;
                    const totalComments = Object.keys(state.comments).length;
                    const totalLikes = Object.values(state.likes).reduce((sum, newsLikes) => sum + Object.keys(newsLikes || {}).length, 0);
                    
                    contentDiv.innerHTML = `
                        <div class="admin-stats">
                            <div class="stat-card">
                                <div class="stat-number">${totalUsers}</div>
                                <div class="stat-label">Total de Usuários</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number">${totalNews}</div>
                                <div class="stat-label">Total de Notícias</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number">${totalComments}</div>
                                <div class="stat-label">Total de Comentários</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number">${totalLikes}</div>
                                <div class="stat-label">Total de Curtidas</div>
                            </div>
                        </div>
                        
                        <h3 style="margin-top: 30px;">Ações Rápidas</h3>
                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <button class="btn-primary" onclick="openCreateNewsModal()">
                                <i class="fas fa-plus"></i> Criar Notícia
                            </button>
                            <button class="btn-secondary" onclick="manageUsers()">
                                <i class="fas fa-users"></i> Gerenciar Usuários
                            </button>
                            <button class="btn-secondary" onclick="featureNews()">
                                <i class="fas fa-star"></i> Definir Manchete
                            </button>
                        </div>
                    `;
                    break;
                    
                case 'users':
                    const users = Object.values(state.users);
                    
                    contentDiv.innerHTML = `
                        <h3>Gerenciamento de Usuários (${users.length})</h3>
                        
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Usuário</th>
                                    <th>Tipo</th>
                                    <th>Status</th>
                                    <th>Cadastro</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${users.map(user => `
                                    <tr>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <img src="${user.avatar}" alt="${user.name}" style="width: 30px; height: 30px; border-radius: 50%;">
                                                ${user.name}
                                            </div>
                                        </td>
                                        <td>@${user.username}</td>
                                        <td>
                                            ${user.isOwner ? '<span style="color: gold;"><i class="fas fa-crown"></i> Dono</span>' : 
                                              user.isJournalist ? '<span style="color: var(--azul-principal);"><i class="fas fa-newspaper"></i> Jornalista</span>' : 
                                              '<span style="color: var(--cinza-escuro);"><i class="fas fa-user"></i> Usuário</span>'}
                                        </td>
                                        <td>
                                            ${user.isBanned ? 
                                                '<span style="color: #ff0000;"><i class="fas fa-ban"></i> Banido</span>' : 
                                                '<span style="color: var(--verde-brookasil);"><i class="fas fa-check"></i> Ativo</span>'}
                                        </td>
                                        <td>${formatDate(user.createdAt)}</td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="action-btn edit-btn" onclick="editUser('${user.id}')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                ${!user.isOwner ? `
                                                    <button class="action-btn promote-btn" onclick="toggleJournalist('${user.id}')">
                                                        ${user.isJournalist ? '<i class="fas fa-user"></i>' : '<i class="fas fa-newspaper"></i>'}
                                                    </button>
                                                    <button class="action-btn ban-btn" onclick="toggleBanUser('${user.id}')">
                                                        ${user.isBanned ? '<i class="fas fa-check"></i>' : '<i class="fas fa-ban"></i>'}
                                                    </button>
                                                ` : ''}
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    break;
                    
                case 'news':
                    const allNews = Object.values(state.news).sort((a, b) => b.createdAt - a.createdAt);
                    
                    contentDiv.innerHTML = `
                        <h3>Gerenciamento de Notícias (${allNews.length})</h3>
                        
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Título</th>
                                    <th>Categoria</th>
                                    <th>Autor</th>
                                    <th>Data</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${allNews.map(news => `
                                    <tr>
                                        <td>${news.title}</td>
                                        <td><span class="news-category" style="font-size: 0.8rem;">${news.category}</span></td>
                                        <td>${news.authorName}</td>
                                        <td>${formatDate(news.createdAt)}</td>
                                        <td>
                                            ${news.isFeatured ? '<span style="color: gold;"><i class="fas fa-star"></i> Manchete</span>' : 
                                              news.isPinned ? '<span style="color: var(--azul-principal);"><i class="fas fa-thumbtack"></i> Fixada</span>' : 
                                              '<span style="color: var(--cinza-escuro);"><i class="fas fa-newspaper"></i> Normal</span>'}
                                        </td>
                                        <td>
                                            <div class="table-actions">
                                                <button class="action-btn edit-btn" onclick="openEditNewsModal('${news.id}')">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="action-btn delete-btn" onclick="deleteNews('${news.id}')">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                                <button class="action-btn" onclick="toggleFeatured('${news.id}')" style="background: ${news.isFeatured ? 'rgba(255,215,0,0.2)' : 'rgba(0,0,0,0.1)'}; color: ${news.isFeatured ? 'gold' : 'var(--preto-suave)'};">
                                                    <i class="fas fa-star"></i>
                                                </button>
                                                <button class="action-btn" onclick="togglePinned('${news.id}')" style="background: ${news.isPinned ? 'rgba(0,102,204,0.2)' : 'rgba(0,0,0,0.1)'}; color: ${news.isPinned ? 'var(--azul-principal)' : 'var(--preto-suave)'};">
                                                    <i class="fas fa-thumbtack"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    break;
                    
                case 'comments':
                    const allComments = Object.values(state.comments).sort((a, b) => b.createdAt - a.createdAt);
                    
                    contentDiv.innerHTML = `
                        <h3>Gerenciamento de Comentários (${allComments.length})</h3>
                        
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Usuário</th>
                                    <th>Comentário</th>
                                    <th>Notícia</th>
                                    <th>Data</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${allComments.map(comment => {
                                    const news = state.news[comment.newsId];
                                    return `
                                        <tr>
                                            <td>
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <img src="${comment.userAvatar}" alt="${comment.userName}" style="width: 30px; height: 30px; border-radius: 50%;">
                                                    ${comment.userName}
                                                </div>
                                            </td>
                                            <td style="max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                                ${comment.text}
                                            </td>
                                            <td>${news ? news.title : 'Notícia excluída'}</td>
                                            <td>${formatDate(comment.createdAt)}</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn delete-btn" onclick="deleteComment('${comment.id}')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    `;
                    break;
            }
        }
        
        // Renderizar página de perfil
        function renderProfilePage() {
            if (!state.currentUser) {
                state.currentPage = 'home';
                renderCurrentPage();
                return;
            }
            
            // Obter notícias do usuário
            const userNews = Object.values(state.news)
                .filter(news => news.authorId === state.currentUser.id)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            // Obter comentários do usuário
            const userComments = Object.values(state.comments)
                .filter(comment => comment.userId === state.currentUser.id)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            const container = document.createElement('div');
            container.id = 'profilePage';
            
            container.innerHTML = `
                <div class="profile-header">
                    <div class="container">
                        <div class="profile-info">
                            <img src="${state.currentUser.avatar}" alt="${state.currentUser.name}" class="profile-avatar">
                            <div class="profile-details">
                                <h1 class="profile-name">${state.currentUser.name}</h1>
                                <div class="profile-username">@${state.currentUser.username}</div>
                                <div class="profile-bio">${state.currentUser.bio || 'Sem biografia'}</div>
                                <button class="btn-primary" onclick="openEditProfileModal()" style="margin-top: 15px;">
                                    <i class="fas fa-edit"></i> Editar Perfil
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="container">
                    <div class="profile-tabs">
                        <div class="profile-tab active" data-tab="news">Notícias (${userNews.length})</div>
                        <div class="profile-tab" data-tab="comments">Comentários (${userComments.length})</div>
                        <div class="profile-tab" data-tab="activity">Atividade</div>
                    </div>
                    
                    <div id="profileTabContent">
                        <!-- Conteúdo será carregado dinamicamente -->
                    </div>
                </div>
            `;
            
            elements.contentContainer.appendChild(container);
            
            // Adicionar eventos às abas
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.onclick = () => {
                    // Remover classe active de todas as abas
                    document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
                    // Adicionar classe active à aba clicada
                    tab.classList.add('active');
                    // Carregar conteúdo da aba
                    loadProfileTab(tab.dataset.tab);
                };
            });
            
            // Carregar primeira aba
            loadProfileTab('news');
        }
        
        // Carregar conteúdo da aba do perfil
        function loadProfileTab(tabName) {
            const contentDiv = document.getElementById('profileTabContent');
            
            switch (tabName) {
                case 'news':
                    const userNews = Object.values(state.news)
                        .filter(news => news.authorId === state.currentUser.id)
                        .sort((a, b) => b.createdAt - a.createdAt);
                    
                    if (userNews.length > 0) {
                        const newsGrid = document.createElement('div');
                        newsGrid.className = 'news-grid';
                        
                        userNews.forEach(news => {
                            const card = createNewsCard(news);
                            newsGrid.appendChild(card);
                        });
                        
                        contentDiv.innerHTML = '';
                        contentDiv.appendChild(newsGrid);
                    } else {
                        contentDiv.innerHTML = `
                            <div style="text-align: center; padding: 40px 20px; color: var(--cinza-escuro);">
                                <i class="fas fa-newspaper" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <p>Você ainda não publicou nenhuma notícia.</p>
                                ${isJournalist() ? `
                                    <button class="btn-primary" onclick="openCreateNewsModal()" style="margin-top: 15px;">
                                        <i class="fas fa-plus"></i> Criar Primeira Notícia
                                    </button>
                                ` : ''}
                            </div>
                        `;
                    }
                    break;
                    
                case 'comments':
                    const userComments = Object.values(state.comments)
                        .filter(comment => comment.userId === state.currentUser.id)
                        .sort((a, b) => b.createdAt - a.createdAt);
                    
                    if (userComments.length > 0) {
                        contentDiv.innerHTML = `
                            <div class="comments-list">
                                ${userComments.map(comment => {
                                    const news = state.news[comment.newsId];
                                    return `
                                        <div class="comment">
                                            <img src="${comment.userAvatar}" alt="${comment.userName}" class="comment-avatar">
                                            <div class="comment-content">
                                                <div class="comment-header">
                                                    <div>
                                                        <div class="comment-user">${comment.userName}</div>
                                                        <div class="comment-date">${formatDate(comment.createdAt)}</div>
                                                    </div>
                                                </div>
                                                <div class="comment-text">${comment.text}</div>
                                                <div class="comment-actions">
                                                    <span class="comment-action" onclick="openNewsDetail('${comment.newsId}')">
                                                        <i class="fas fa-external-link-alt"></i> Ver Notícia
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `;
                    } else {
                        contentDiv.innerHTML = `
                            <div style="text-align: center; padding: 40px 20px; color: var(--cinza-escuro);">
                                <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <p>Você ainda não fez nenhum comentário.</p>
                            </div>
                        `;
                    }
                    break;
                    
                case 'activity':
                    // Obter todas as interações do usuário
                    const userId = state.currentUser.id;
                    
                    // Curtidas
                    const likedNews = Object.keys(state.likes)
                        .filter(newsId => state.likes[newsId] && state.likes[newsId][userId])
                        .map(newsId => state.news[newsId])
                        .filter(news => news);
                    
                    // Descurtidas
                    const dislikedNews = Object.keys(state.dislikes)
                        .filter(newsId => state.dislikes[newsId] && state.dislikes[newsId][userId])
                        .map(newsId => state.news[newsId])
                        .filter(news => news);
                    
                    // Republicações
                    const repostedNews = Object.keys(state.reposts)
                        .filter(newsId => state.reposts[newsId] && state.reposts[newsId][userId])
                        .map(newsId => state.news[newsId])
                        .filter(news => news);
                    
                    contentDiv.innerHTML = `
                        <h3 style="margin-bottom: 20px;">Sua Atividade</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div class="stat-card">
                                <div class="stat-number">${likedNews.length}</div>
                                <div class="stat-label">Notícias Curtidas</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number">${dislikedNews.length}</div>
                                <div class="stat-label">Notícias Descurtidas</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-number">${repostedNews.length}</div>
                                <div class="stat-label">Notícias Republicadas</div>
                            </div>
                        </div>
                        
                        ${likedNews.length > 0 ? `
                            <h4 style="margin-bottom: 15px;">Notícias Curtidas</h4>
                            <div class="news-grid" style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));">
                                ${likedNews.slice(0, 3).map(news => `
                                    <div class="news-card" onclick="openNewsDetail('${news.id}')">
                                        <img src="${news.image}" alt="${news.title}" class="news-img">
                                        <div class="news-content">
                                            <span class="news-category">${news.category}</span>
                                            <h3 class="news-title">${news.title}</h3>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    `;
                    break;
            }
        }
        
        // ==========================================================================
        // FUNÇÕES DE MODAL
        // ==========================================================================
        
        // Abrir modal de login
        function openLoginModal() {
            elements.loginModal.classList.remove('hidden');
            elements.loginForm.classList.remove('hidden');
            elements.registerForm.classList.add('hidden');
            elements.modalTitle.textContent = 'Entrar no g1 Brookasil';
        }
        
        // Fechar modal de login
        function closeLoginModal() {
            elements.loginModal.classList.add('hidden');
        }
        
        // Abrir modal de criação de notícia
        function openCreateNewsModal() {
            if (!state.currentUser || !isJournalist()) {
                showAlert('Apenas jornalistas podem criar notícias!', 'error');
                return;
            }
            
            // Limpar campos
            elements.newsTitle.value = '';
            elements.newsSubtitle.value = '';
            elements.newsCategory.value = 'Política';
            elements.newsImage.value = '';
            elements.newsContent.value = '';
            elements.newsModalTitle.textContent = 'Criar Nova Notícia';
            
            elements.newsModal.classList.remove('hidden');
        }
        
        // Abrir modal de edição de notícia
        function openEditNewsModal(newsId) {
            const news = state.news[newsId];
            if (!news) return;
            
            // Verificar permissão
            if (!isOwner() && news.authorId !== state.currentUser.id) {
                showAlert('Você não tem permissão para editar esta notícia!', 'error');
                return;
            }
            
            // Preencher campos
            elements.newsTitle.value = news.title;
            elements.newsSubtitle.value = news.subtitle || '';
            elements.newsCategory.value = news.category;
            elements.newsImage.value = news.image;
            elements.newsContent.value = news.content;
            elements.newsModalTitle.textContent = 'Editar Notícia';
            
            // Armazenar ID da notícia sendo editada
            elements.saveNews.dataset.newsId = newsId;
            
            elements.newsModal.classList.remove('hidden');
        }
        
        // Fechar modal de notícia
        function closeNewsModal() {
            elements.newsModal.classList.add('hidden');
            delete elements.saveNews.dataset.newsId;
        }
        
        // Abrir modal de edição de perfil
        function openEditProfileModal() {
            if (!state.currentUser) return;
            
            elements.editName.value = state.currentUser.name;
            elements.editUsername.value = state.currentUser.username;
            elements.editBio.value = state.currentUser.bio || '';
            elements.editAvatar.value = state.currentUser.avatar;
            
            elements.profileModal.classList.remove('hidden');
        }
        
        // Fechar modal de perfil
        function closeProfileModal() {
            elements.profileModal.classList.add('hidden');
        }
        
        // Abrir modal de administração
        function openAdminModal(title, content) {
            elements.adminModalTitle.textContent = title;
            elements.adminModalContent.innerHTML = content;
            elements.adminModal.classList.remove('hidden');
        }
        
        // Fechar modal de administração
        function closeAdminModal() {
            elements.adminModal.classList.add('hidden');
        }
        
        // ==========================================================================
        // FUNÇÕES DE GERENCIAMENTO (ADMIN)
        // ==========================================================================
        
        // Alternar status de jornalista
        async function toggleJournalist(userId) {
            if (!isOwner()) return;
            
            const user = state.users[userId];
            if (!user || user.isOwner) return;
            
            user.isJournalist = !user.isJournalist;
            
            const success = await saveUser(user);
            
            if (success) {
                showAlert(`Usuário ${user.isJournalist ? 'promovido a jornalista' : 'rebaixado a usuário comum'}!`, 'success');
                renderAdminPanel(); // Atualizar painel
            }
        }
        
        // Alternar banimento de usuário
        async function toggleBanUser(userId) {
            if (!isOwner()) return;
            
            const user = state.users[userId];
            if (!user || user.isOwner) return;
            
            user.isBanned = !user.isBanned;
            
            const success = await saveUser(user);
            
            if (success) {
                showAlert(`Usuário ${user.isBanned ? 'banido' : 'desbanido'}!`, 'success');
                renderAdminPanel(); // Atualizar painel
            }
        }
        
        // Editar usuário (admin)
        async function editUser(userId) {
            if (!isOwner()) return;
            
            const user = state.users[userId];
            if (!user) return;
            
            const content = `
                <div class="form-group">
                    <label class="form-label">Nome completo</label>
                    <input type="text" class="form-input" id="adminEditName" value="${user.name}">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Nome de usuário</label>
                    <input type="text" class="form-input" id="adminEditUsername" value="${user.username}">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Biografia</label>
                    <textarea class="form-textarea" id="adminEditBio">${user.bio || ''}</textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">URL da Foto</label>
                    <input type="text" class="form-input" id="adminEditAvatar" value="${user.avatar}">
                </div>
                
                <div class="form-buttons">
                    <button class="btn-primary" onclick="saveUserChanges('${userId}')">
                        Salvar Alterações
                    </button>
                    <button class="btn-secondary" onclick="closeAdminModal()">
                        Cancelar
                    </button>
                </div>
            `;
            
            openAdminModal(`Editar Usuário: ${user.name}`, content);
        }
        
        // Salvar alterações do usuário (admin)
        async function saveUserChanges(userId) {
            if (!isOwner()) return;
            
            const user = state.users[userId];
            if (!user) return;
            
            const name = document.getElementById('adminEditName').value;
            const username = document.getElementById('adminEditUsername').value;
            const bio = document.getElementById('adminEditBio').value;
            const avatar = document.getElementById('adminEditAvatar').value;
            
            // Verificar se o novo username já está em uso por outro usuário
            for (const id in state.users) {
                if (id !== userId && state.users[id].username === username) {
                    showAlert('Nome de usuário já está em uso!', 'error');
                    return;
                }
            }
            
            user.name = name;
            user.username = username;
            user.bio = bio;
            user.avatar = avatar;
            
            const success = await saveUser(user);
            
            if (success) {
                showAlert('Usuário atualizado com sucesso!', 'success');
                closeAdminModal();
                renderAdminPanel(); // Atualizar painel
                
                // Se for o usuário atual, atualizar state
                if (state.currentUser && state.currentUser.id === userId) {
                    state.currentUser = user;
                    updateUserUI();
                }
            } else {
                showAlert('Erro ao atualizar usuário!', 'error');
            }
        }
        
        // Alternar notícia em destaque
        async function toggleFeatured(newsId) {
            if (!isOwner()) return;
            
            const news = state.news[newsId];
            if (!news) return;
            
            // Remover destaque de todas as outras notícias
            if (!news.isFeatured) {
                for (const id in state.news) {
                    if (state.news[id].isFeatured) {
                        state.news[id].isFeatured = false;
                        await saveNews(state.news[id]);
                    }
                }
            }
            
            news.isFeatured = !news.isFeatured;
            
            const success = await saveNews(news);
            
            if (success) {
                showAlert(`Notícia ${news.isFeatured ? 'definida como manchete' : 'removida da manchete'}!`, 'success');
                renderAdminPanel(); // Atualizar painel
            }
        }
        
        // Alternar notícia fixada
        async function togglePinned(newsId) {
            if (!isOwner()) return;
            
            const news = state.news[newsId];
            if (!news) return;
            
            news.isPinned = !news.isPinned;
            
            const success = await saveNews(news);
            
            if (success) {
                showAlert(`Notícia ${news.isPinned ? 'fixada no topo' : 'desfixada'}!`, 'success');
                renderAdminPanel(); // Atualizar painel
            }
        }
        
        // ==========================================================================
        // FUNÇÕES DE SUBMISSÃO
        // ==========================================================================
        
        // Submeter comentário
        async function submitComment(newsId) {
            const text = document.getElementById('newCommentText');
            if (!text || !text.value.trim()) {
                showAlert('Digite um comentário!', 'error');
                return;
            }
            
            const success = await commentOnNews(newsId, text.value.trim());
            
            if (success) {
                text.value = '';
                // Recarregar página de notícia
                renderNewsDetailPage();
            }
        }
        
        // Responder a comentário
        function replyToComment(commentId) {
            const comment = document.getElementById(`comment-${commentId}`);
            if (!comment) return;
            
            const replyInput = document.createElement('div');
            replyInput.className = 'comment-form';
            replyInput.style.marginTop = '15px';
            
            replyInput.innerHTML = `
                <textarea class="comment-input" id="replyText-${commentId}" placeholder="Digite sua resposta..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="comment-submit" onclick="submitReply('${commentId}')">Responder</button>
                    <button class="btn-secondary" onclick="this.parentElement.parentElement.remove()">Cancelar</button>
                </div>
            `;
            
            // Inserir após o comentário
            comment.querySelector('.comment-content').appendChild(replyInput);
        }
        
        // Submeter resposta
        async function submitReply(commentId) {
            const text = document.getElementById(`replyText-${commentId}`);
            if (!text || !text.value.trim()) {
                showAlert('Digite uma resposta!', 'error');
                return;
            }
            
            const comment = state.comments[commentId];
            if (!comment) return;
            
            const success = await commentOnNews(comment.newsId, text.value.trim(), commentId);
            
            if (success) {
                // Recarregar página de notícia
                renderNewsDetailPage();
            }
        }
        
        // Submeter trabalho para divulgação
        async function submitWork() {
            if (!state.currentUser) return;
            
            const title = document.getElementById('workTitle').value.trim();
            const category = document.getElementById('workCategory').value;
            const description = document.getElementById('workDescription').value.trim();
            const link = document.getElementById('workLink').value.trim();
            
            if (!title || !description) {
                showAlert('Preencha título e descrição!', 'error');
                return;
            }
            
            // Em um sistema real, isso seria salvo no Firebase
            showAlert('Trabalho enviado para análise! O dono do sistema irá avaliar sua divulgação.', 'success');
            
            // Limpar campos
            document.getElementById('workTitle').value = '';
            document.getElementById('workCategory').value = 'Design Gráfico';
            document.getElementById('workDescription').value = '';
            document.getElementById('workLink').value = '';
        }
        
        // ==========================================================================
        // INICIALIZAÇÃO E EVENTOS
        // ==========================================================================
        
        // Inicializar aplicação
        function init() {
            // Carregar dados do Firebase
            loadFirebaseData();
            
            // Configurar eventos
            setupEventListeners();
            
            // Atualizar relógio e clima
            updateClock();
            updateWeather();
            setInterval(updateClock, 60000); // Atualizar a cada minuto
            
            // Renderizar página inicial
            renderCurrentPage();
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            // Menu mobile
            elements.mobileToggle.addEventListener('click', () => {
                elements.navMenu.classList.toggle('show');
            });
            
            // Navegação
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    // Fechar menu mobile se aberto
                    elements.navMenu.classList.remove('show');
                    
                    // Atualizar item ativo
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Navegar para a página
                    state.currentPage = item.dataset.page;
                    if (item.dataset.category) {
                        state.currentCategory = item.dataset.category;
                    }
                    renderCurrentPage();
                });
            });
            
            // Links do footer
            document.querySelectorAll('.footer-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    if (link.dataset.page) {
                        state.currentPage = link.dataset.page;
                        if (link.dataset.category) {
                            state.currentCategory = link.dataset.category;
                        }
                        renderCurrentPage();
                        
                        // Atualizar menu ativo
                        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                        document.querySelector(`.nav-item[data-page="${link.dataset.page}"]`)?.classList.add('active');
                    }
                });
            });
            
            // Botão de login
            elements.loginButton.addEventListener('click', openLoginModal);
            
            // Menu do usuário
            elements.userAvatar.addEventListener('click', () => {
                elements.dropdownMenu.classList.toggle('show');
            });
            
            // Fechar menu do usuário ao clicar fora
            document.addEventListener('click', (e) => {
                if (!elements.userMenu.contains(e.target)) {
                    elements.dropdownMenu.classList.remove('show');
                }
            });
            
            // Dropdown do usuário
            document.getElementById('profileBtn')?.addEventListener('click', () => {
                elements.dropdownMenu.classList.remove('show');
                state.currentPage = 'profile';
                renderCurrentPage();
            });
            
            document.getElementById('journalistBtn')?.addEventListener('click', () => {
                elements.dropdownMenu.classList.remove('show');
                state.currentPage = 'journalist';
                renderCurrentPage();
            });
            
            document.getElementById('logoutBtn')?.addEventListener('click', () => {
                elements.dropdownMenu.classList.remove('show');
                logout();
                state.currentPage = 'home';
                renderCurrentPage();
            });
            
            // Modais - fechar
            elements.closeLoginModal.addEventListener('click', closeLoginModal);
            elements.closeNewsModal.addEventListener('click', closeNewsModal);
            elements.closeProfileModal.addEventListener('click', closeProfileModal);
            elements.closeAdminModal.addEventListener('click', closeAdminModal);
            
            // Fechar modais ao clicar fora
            document.addEventListener('click', (e) => {
                if (e.target === elements.loginModal) closeLoginModal();
                if (e.target === elements.newsModal) closeNewsModal();
                if (e.target === elements.profileModal) closeProfileModal();
                if (e.target === elements.adminModal) closeAdminModal();
            });
            
            // Formulário de login/cadastro
            elements.showRegister.addEventListener('click', () => {
                elements.loginForm.classList.add('hidden');
                elements.registerForm.classList.remove('hidden');
                elements.modalTitle.textContent = 'Criar Conta no g1 Brookasil';
            });
            
            elements.showLogin.addEventListener('click', () => {
                elements.registerForm.classList.add('hidden');
                elements.loginForm.classList.remove('hidden');
                elements.modalTitle.textContent = 'Entrar no g1 Brookasil';
            });
            
            elements.loginSubmit.addEventListener('click', async () => {
                const username = document.getElementById('loginUsername').value.trim();
                const password = document.getElementById('loginPassword').value.trim();
                
                if (!username || !password) {
                    showAlert('Preencha todos os campos!', 'error');
                    return;
                }
                
                const success = await login(username, password);
                
                if (success) {
                    closeLoginModal();
                    updateUserUI();
                    renderCurrentPage();
                }
            });
            
            elements.registerSubmit.addEventListener('click', async () => {
                const name = document.getElementById('registerName').value.trim();
                const username = document.getElementById('registerUsername').value.trim();
                const password = document.getElementById('registerPassword').value.trim();
                const bio = document.getElementById('registerBio').value.trim();
                
                if (!name || !username || !password) {
                    showAlert('Preencha nome, usuário e senha!', 'error');
                    return;
                }
                
                const success = await register(name, username, password, bio);
                
                if (success) {
                    closeLoginModal();
                    updateUserUI();
                    renderCurrentPage();
                }
            });
            
            // Formulário de notícia
            elements.saveNews.addEventListener('click', async () => {
                const title = elements.newsTitle.value.trim();
                const subtitle = elements.newsSubtitle.value.trim();
                const category = elements.newsCategory.value;
                const image = elements.newsImage.value.trim();
                const content = elements.newsContent.value.trim();
                
                if (!title || !content) {
                    showAlert('Preencha título e conteúdo!', 'error');
                    return;
                }
                
                const newsId = elements.saveNews.dataset.newsId;
                
                let success;
                if (newsId) {
                    // Editar notícia existente
                    success = await editNews(newsId, title, subtitle, category, image, content);
                } else {
                    // Criar nova notícia
                    success = await createNews(title, subtitle, category, image, content);
                }
                
                if (success) {
                    closeNewsModal();
                    renderCurrentPage();
                }
            });
            
            elements.cancelNews.addEventListener('click', closeNewsModal);
            
            // Formulário de perfil
            elements.saveProfile.addEventListener('click', async () => {
                const name = elements.editName.value.trim();
                const username = elements.editUsername.value.trim();
                const bio = elements.editBio.value.trim();
                const avatar = elements.editAvatar.value.trim();
                
                if (!name || !username) {
                    showAlert('Preencha nome e usuário!', 'error');
                    return;
                }
                
                const success = await updateProfile(name, username, bio, avatar);
                
                if (success) {
                    closeProfileModal();
                    updateUserUI();
                    renderProfilePage();
                }
            });
            
            elements.cancelProfile.addEventListener('click', closeProfileModal);
            
            // Busca
            elements.searchBtn.addEventListener('click', performSearch);
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }
        
        // Atualizar relógio
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                timeZone: 'America/Sao_Paulo'
            });
            
            elements.currentTime.textContent = timeString;
        }
        
        // Atualizar clima (simulado)
        function updateWeather() {
            const weatherOptions = [
                'Ensolarado, 32°C',
                'Parcialmente nublado, 28°C',
                'Chuvoso, 24°C',
                'Nublado, 26°C'
            ];
            
            const randomWeather = weatherOptions[Math.floor(Math.random() * weatherOptions.length)];
            elements.weatherInfo.textContent = randomWeather;
        }
        
        // Realizar busca
        function performSearch() {
            const query = elements.searchInput.value.trim().toLowerCase();
            
            if (!query) return;
            
            // Filtrar notícias
            const allNews = Object.values(state.news);
            const results = allNews.filter(news => 
                news.title.toLowerCase().includes(query) ||
                news.subtitle.toLowerCase().includes(query) ||
                news.category.toLowerCase().includes(query) ||
                news.authorName.toLowerCase().includes(query) ||
                news.content.toLowerCase().includes(query)
            );
            
            if (results.length > 0) {
                state.currentPage = 'news';
                state.currentCategory = null;
                
                // Criar página de resultados
                const container = document.createElement('div');
                container.id = 'searchResults';
                
                const sectionHeader = document.createElement('div');
                sectionHeader.className = 'section-header';
                
                const title = document.createElement('h2');
                title.className = 'section-title';
                title.textContent = `Resultados para: "${query}" (${results.length})`;
                
                sectionHeader.appendChild(title);
                container.appendChild(sectionHeader);
                
                const newsGrid = document.createElement('div');
                newsGrid.className = 'news-grid';
                
                results.forEach(news => {
                    const card = createNewsCard(news);
                    newsGrid.appendChild(card);
                });
                
                container.appendChild(newsGrid);
                
                // Limpar container e adicionar resultados
                elements.contentContainer.innerHTML = '';
                elements.contentContainer.appendChild(container);
                
                // Atualizar menu ativo
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            } else {
                showAlert('Nenhuma notícia encontrada para sua busca.', 'info');
            }
        }
        
        // Inicializar a aplicação quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
